import{a,j as s}from"./index-5d5c5b17.js";import{r as n}from"./vendor-08663a87.js";import{I as p,at as b,aC as w,r as x}from"./ui-529afc54.js";const N=()=>{const[i,g]=n.useState([]),[m,l]=n.useState(!0);n.useEffect(()=>{c()},[]);const c=async()=>{var r;l(!0);const e=[];try{localStorage.setItem("diagnostic_test","test"),localStorage.removeItem("diagnostic_test"),e.push({name:"localStorage",status:"pass",message:"localStorage is available and working"})}catch(t){e.push({name:"localStorage",status:"fail",message:"localStorage is not available or restricted",details:t})}try{sessionStorage.setItem("diagnostic_test","test"),sessionStorage.removeItem("diagnostic_test"),e.push({name:"sessionStorage",status:"pass",message:"sessionStorage is available and working"})}catch(t){e.push({name:"sessionStorage",status:"fail",message:"sessionStorage is not available or restricted",details:t})}if("serviceWorker"in navigator)try{const t=await navigator.serviceWorker.getRegistration("/salebds/");t?e.push({name:"Service Worker",status:"pass",message:"Service Worker is registered and active",details:{scope:t.scope,state:(r=t.active)==null?void 0:r.state}}):e.push({name:"Service Worker",status:"warning",message:"Service Worker is supported but not registered"})}catch(t){e.push({name:"Service Worker",status:"fail",message:"Service Worker registration failed",details:t})}else e.push({name:"Service Worker",status:"warning",message:"Service Worker not supported"});try{await fetch("/salebds/manifest.webmanifest",{method:"HEAD"}),e.push({name:"Fetch API",status:"pass",message:"Fetch API is working"})}catch(t){e.push({name:"Fetch API",status:"fail",message:"Fetch API failed",details:t})}try{const t=window.location.pathname;e.push({name:"React Router",status:"pass",message:"React Router is working",details:{currentPath:t,basename:"/salebds"}})}catch(t){e.push({name:"React Router",status:"fail",message:"React Router failed",details:t})}try{e.push({name:"Context APIs",status:"pass",message:"React Contexts are accessible"})}catch(t){e.push({name:"Context APIs",status:"fail",message:"React Contexts failed",details:t})}g(e),l(!1)},u=e=>{switch(e){case"pass":return a(x,{className:"w-5 h-5 text-green-500"});case"fail":return a(w,{className:"w-5 h-5 text-red-500"});case"warning":return a(b,{className:"w-5 h-5 text-yellow-500"});default:return a(p,{className:"w-5 h-5 text-gray-500"})}},h=e=>{switch(e){case"pass":return"text-green-700 bg-green-50 border-green-200";case"fail":return"text-red-700 bg-red-50 border-red-200";case"warning":return"text-yellow-700 bg-yellow-50 border-yellow-200";default:return"text-gray-700 bg-gray-50 border-gray-200"}},d={url:window.location.href,userAgent:navigator.userAgent,cookieEnabled:navigator.cookieEnabled,onlineStatus:navigator.onLine,language:navigator.language,platform:navigator.platform,timestamp:new Date().toISOString(),environment:"production",isProduction:!0};return a("div",{className:"min-h-screen bg-gray-50 p-4",children:s("div",{className:"max-w-4xl mx-auto",children:[s("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[a("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"App Diagnostics"}),a("p",{className:"text-gray-600",children:"Kiểm tra tình trạng hoạt động của ứng dụng"})]}),m?s("div",{className:"bg-white rounded-lg shadow-sm border p-6 text-center",children:[a("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),a("p",{children:"Đang chạy diagnostics..."})]}):s("div",{className:"space-y-4",children:[s("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[a("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Test Results"}),a("div",{className:"space-y-3",children:i.map((e,r)=>a("div",{className:`p-4 border rounded-lg ${h(e.status)}`,children:s("div",{className:"flex items-center gap-3",children:[u(e.status),s("div",{className:"flex-1",children:[a("h3",{className:"font-medium",children:e.name}),a("p",{className:"text-sm",children:e.message}),e.details&&s("details",{className:"mt-2",children:[a("summary",{className:"text-xs cursor-pointer",children:"Details"}),a("pre",{className:"mt-1 text-xs overflow-auto",children:JSON.stringify(e.details,null,2)})]})]})]})},r))})]}),s("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[a("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Environment Information"}),a("div",{className:"bg-gray-50 rounded p-4",children:a("pre",{className:"text-xs text-gray-600 overflow-auto",children:JSON.stringify(d,null,2)})})]}),s("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[a("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),s("div",{className:"flex flex-wrap gap-3",children:[a("button",{onClick:c,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"🔄 Run Again"}),a("button",{onClick:()=>{localStorage.clear(),sessionStorage.clear(),window.location.reload()},className:"bg-yellow-600 text-white px-4 py-2 rounded hover:bg-yellow-700",children:"🧹 Clear Storage"}),a("button",{onClick:()=>window.location.href="/salebds/",className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"🏠 Go Home"}),a("button",{onClick:()=>{const e={results:i,environmentInfo:d},r=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),t=URL.createObjectURL(r),o=document.createElement("a");o.href=t,o.download=`diagnostic-report-${Date.now()}.json`,o.click(),URL.revokeObjectURL(t)},className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"📋 Download Report"})]})]})]})]})})};export{N as default};
